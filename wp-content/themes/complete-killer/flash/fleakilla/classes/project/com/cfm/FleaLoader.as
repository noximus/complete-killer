package com.cfm{	import flash.display.*;	import flash.events.*;	import flash.errors.*;	import flash.net.*;	import com.cfm.*;	import com.greensock.*;	import com.greensock.easing.*;		public class FleaLoader extends MovieClip	{		private var _preloader:Loader;		private var _site:*;		private var _basePath:String = "";				public var progressbar : MovieClip;				public function FleaLoader():void		{			_preloader = new Loader();			var basePath = stage.loaderInfo.parameters.basepath;			if(basePath != null && basePath != undefined) _basePath = basePath;						_preloader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR,_error,false,0,true);            _preloader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS,_progress,false,0,true);			_preloader.contentLoaderInfo.addEventListener(Event.COMPLETE,_complete,false,0,true);			_preloader.load(new URLRequest(_basePath + "assets/flash/fleakilla/fleakilla.swf"));						progressbar.amtloaded.scaleX = 0;		}			private function _error(e):void		{			trace("preload error: " + e.text);		}				private function _progress(e):void		{			trace("preload progress: " + (e.bytesLoaded/e.bytesTotal)*100 + "%");			progressbar.amtloaded.scaleX = e.bytesLoaded/e.bytesTotal;		}				private function _complete(event : Event):void		{			trace("preload complete");			TweenMax.to(progressbar,0.5,{alpha:0,ease:Quad.easeOut,onComplete:function(){										_site = _preloader.content;				_site.blendMode = BlendMode.LAYER;				addChild(_site);							}});		}				public function getObjectURLVariables(whichObject:Object):URLVariables {			var variables:URLVariables=new URLVariables();			for (var i in whichObject) 			{				variables[i]=whichObject[i];			}			return(variables);		}	}}